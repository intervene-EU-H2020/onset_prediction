
```{r}
library(ICCI)
library(Istudysetup)
library(ILongDataUtils)
library(IHRC)

set.seed(919923)
pheno_data <- Istudysetup::create_test_df(10000)
icd_data <- ILongDataUtils::create_test_df_multi_icd_ver(n_icd10=50000, 
                                                         icd10_indv=pheno_data$ID)  

phenocols <- c("J10_ASTHMA", "I9_VTE")
score_data <- ICCI::calc_cci(icd_data,
                             exp_start=30,
                             exp_end=40)
IHRC::calc_endpt_hr(pheno_data,
                    score_data,
                    score_col_name="score",
                    score_type="CCI",
                    endpts=phenocols,
                    exp_age=30,
                    exp_len=10,
                    wash_len=2,
                    obs_len=8,
                    downsample_fctr=4,
                    write_hr_res=TRUE,
                    write_study_res=TRUE,
                    write_study_log="file",
                    res_dir="results/")
```
